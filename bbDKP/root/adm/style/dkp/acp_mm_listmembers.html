<!-- INCLUDE overall_header.html -->
<script  type="text/javascript">
//<![CDATA[
function isValidChar(char){

    var txt = char;
    var found = false;
    var validChars = "0123456789"; //List of valid characters

    for(j=0;j<txt.length;j++){ //Will look through the value of text
        var c = txt.charAt(j);
        found = false;
        for(x=0;x<validChars.length;x++){
            if(c==validChars.charAt(x)){
                found=true;
                break;
            }
        }
        if(!found){
            //If invalid character is found remove it and return the valid character(s).
            document.getElementById('minlevel').value = char.substring(0, char.length -1);
            document.getElementById('maxlevel').value = char.substring(0, char.length -1);
            break;
        }
    }
}
//]]>
</script>
<a name="maincontent"></a>
<span><h1>{L_TITLE}</h1></span>
<div>
<form id="mm_listmembers" method="post" action="{F_MEMBERS_LIST}">

<fieldset style="background-color: #EEEEEE">

<dl>
	<dt><label for="member_guild_id">{L_GUILD}:</label></dt>
	<dd>
		<div style="display: table;">
            <div style="width:50%; float: left"><a href="{U_VIEW_GUILD}"><img style="width:80px; height:80px" src="{GUILD_EMBLEM}" alt="{GUILD_NAME}" /></a></div>
            <div style="width:50%; vertical-align: middle; display: table-cell;">
                <select id="member_guild_id" name="member_guild_id" class="input" onchange="javascript:form.submit();" >
                    <!-- BEGIN guild_row -->
                    <option value="{guild_row.VALUE}"{guild_row.SELECTED}>{guild_row.OPTION}</option>
                    <!-- END guild_row -->
                </select>

            </div>

        </div>
   	</dd>
</dl>
<dl>
	<dt><label for="minlevel">{L_LEVEL}:</label></dt>
	<dd>
		{L_MIN}<input type="text" name="minlevel" id="minlevel" size="5" maxlength="5" value="{MINLEVEL}" class="input" onKeyup="isValidChar(this.value);"/>
		{L_MAX}<input type="text" name="maxlevel" id="maxlevel" size="5" maxlength="5" value="{MAXLEVEL}" class="input" onKeyup="isValidChar(this.value);"/>
   	</dd>
</dl>
<dl>
	<dt><label for="activemembers">{L_ACTIVE}:</label></dt>
     <dd>
     {L_ACTIVE}&nbsp;<input name="active" type="checkbox" id="active" value="1" <!-- IF F_SELECTACTIVE == 1 --> checked="checked"<!-- ENDIF -->  />
     {L_NONACTIVE}&nbsp;<input name="nonactive" type="checkbox" id="nonactive" value="1" <!-- IF F_SELECTNONACTIVE == 1 --> checked="checked"<!-- ENDIF -->  />
 	</dd>
</dl>

<p class="submit-buttons">
 <input type="submit" name="add" value="{L_SEARCH}" class="button1" />
</p>
</fieldset>

<!-- IF .members_row -->
<!-- IF MEMBER_PAGINATION -->
<div class="pagination">
	<a href="#" onclick="jumpto(); return false;" title="{L_JUMP_TO_PAGE}">{S_ON_PAGE}</a> <span>{MEMBER_PAGINATION}</span>
</div>
<!-- ENDIF -->

<table width="100%" border="0" cellspacing="1" cellpadding="2">
	<thead>
  <tr>
  	<th style="text-align:center; width:6%">{L_ACTION}
  	<span class="small"><a href="#" onclick="marklist('mm_listmembers', 'delete_id', true); return false;">{L_MARK_ALL}</a> <br />
	<a href="#" onclick="marklist('mm_listmembers', 'delete_id', false); return false;">{L_UNMARK_ALL}</a></span>
    <th style="text-align:center; width:3%; white-space: nowrap;">{L_ACTIVE}<br />
    <span class="small"><a href="#" onclick="marklist('mm_listmembers', 'activate_id', true); return false;">{L_MARK_ALL}</a> <br />
    <a href="#" onclick="marklist('mm_listmembers', 'activate_id', false); return false;">{L_UNMARK_ALL}</a></span>
    </th>
    <th style="text-align:left; width:3%"><a href="{O_ID}">{L_ID}</a></th>
    <th style="text-align:left; width:20%"><a href="{O_NAME}">{L_NAME}</a></th>
    <th style="text-align:left; width:15%; white-space: nowrap;"><a href="{O_CLASS}">{L_RACE}/{L_CLASS}</a></th>
    <th style="text-align:left; width:5%; white-space: nowrap;"><a href="{O_LEVEL}">{L_LEVEL}</a></th>
    <th style="text-align:left; width:10%"><a href="{O_USERNAME}">{L_USERNAME}</a></th>
    <th style="text-align:left; width:10%"><a href="{O_RANK}">{L_RANK}</a></th>
    <th style="text-align:left; width:10%"><a href="{O_JOINDATE}">{L_JOINDATE}</a></th>
    <th style="text-align:left; width:10%"><a href="{O_OUTDATE}">{L_OUTDATE}</a></th>

  	</th>
  </tr>
  </thead>
  <tfoot>
  <tr>
    <th colspan="10" class="footer">{LISTMEMBERS_FOOTCOUNT}</th>
  </tr>
  </tfoot>
  <tbody>
  <!-- BEGIN members_row -->
  <!-- IF members_row.S_ROW_COUNT is even -->
  <tr class="row1">
  <!-- ELSEIF members_row.S_ROW_COUNT is not even -->
  <tr class="row2">
  <!-- ENDIF -->

  <!-- IF members_row.S_READONLY  == 1 -->
  <tr class="highlight">
  <!-- ENDIF -->
	<td style="text-align:center; white-space: nowrap;">
		<a href="{members_row.U_VIEW_MEMBER}">{ICON_EDIT}</a>
		<!-- IF members_row.S_READONLY == 0 --> <a href="{members_row.U_DELETE_MEMBER}">{ICON_DELETE}</a> <!-- ENDIF -->
    	<input type="checkbox" class="radio" name="delete_id[{members_row.ID}]" value="1" {members_row.DELETED} />
	</td>
    <td style="text-align:center;"><input type="checkbox" class="radio" name="activate_id[{members_row.ID}]" value="{members_row.ID}" {members_row.STATUS} /></td>
    <td style="text-align:center;">{members_row.ID}</td>
    <td class="row2" style="text-align:left;" ><a style="color:{members_row.COLORCODE}"  href="{members_row.U_VIEW_MEMBER}"><strong>{members_row.NAME}</strong></a></td>
    <td style="text-align:left;" ><!-- IF members_row.S_RACE_IMAGE_EXISTS --><img src="{members_row.RACE_IMAGE}" alt="" />&nbsp;<!-- ELSE -->&nbsp;<!-- ENDIF --><!-- IF members_row.S_CLASS_IMAGE_EXISTS --><img src="{members_row.CLASS_IMAGE}" alt="" /><!-- ELSE -->&nbsp;<!-- ENDIF -->&nbsp;<span style="color:{members_row.COLORCODE}" >{members_row.CLASS}</span></td>
    <td style="text-align:center;" >{members_row.LEVEL}</td>
    <td style="text-align:left;" ><a href="{members_row.U_VIEW_USER}">{members_row.USERNAME}</a></td>
    <td style="text-align:left;" >{members_row.RANK}</td>
    <td style="text-align:left;" >{members_row.JOINDATE}</td>
    <td style="text-align:left;" >{members_row.OUTDATE}</td>
  </tr>
  <!-- END members_row -->
  </tbody>
</table>

<!-- IF MEMBER_PAGINATION -->
<div class="pagination">
	<a href="#" onclick="jumpto(); return false;" title="{L_JUMP_TO_PAGE}">{S_ON_PAGE}</a> <span>{MEMBER_PAGINATION}</span>
</div>
<!-- ENDIF -->

<br />
<fieldset class="quick" style="float: {S_CONTENT_FLOW_BEGIN};">
    {S_FORM_TOKEN}
  	<!-- BEGIN members_row -->
  	<input type="hidden" name="hidden_member[{members_row.ID}]" value="{members_row.ID}" />
  	<!-- END members_row -->
  	<input type="hidden" name="start" value="{START}" />
 	<input class="button2" type="submit" name="deactivate" value="{L_CHANGE_STATUS}" title="{L_TOGGLE_ACTIVE}" />
	<input class="button2" name="memberadd" type="submit" value="{L_ADD_MEMBER}"  />
	<!-- IF S_WOW -->
	<input class="button2" name="charapicall" type="submit" value="{L_CHARACTERAPICALL}" title="{L_CALL_BATTLENET_CHAR_API}"/>
	<!-- ENDIF -->
	<br /><br />
</fieldset>
<fieldset class="quick" style="float: {S_CONTENT_FLOW_END};">
	<input class="button2" type="submit" name="delete" value="{L_DELETE_MEMBER}" title="{L_MASS_DELETE_CHAR}"/>
</fieldset>

<!-- ELSE -->

<div class="warningbox">
<h3>{L_WARNING}</h3>
<p>{L_WARNING_NOMEMBERS}</p>
</div>

<fieldset class="quick" style="float: {S_CONTENT_FLOW_BEGIN};">
	<input type="submit" name="memberadd"  value="{L_ADD_MEMBER}" class="button2" />
	<input type="hidden" name="hidden_guildid" value="{GUILDID}" />
</fieldset>
<!-- ENDIF -->
</form>
</div>
<!-- INCLUDE dkp/overall_footer.html -->
